"0","# gis
pas_gis <- st_read(""H:/land_use/permissible_use/zoning.gdb"",""zoning_local_plan_pas"")
"
"1","Reading layer `"
"1","zoning_local_plan_pas"
"1","' from data source `"
"1","H:\land_use\permissible_use\zoning.gdb"
"1","' using driver `"
"1","OpenFileGDB"
"1","'"
"1","
"
"1","Simple feature collection with 118 features and 28 fields"
"1","
"
"1","geometry type:  MULTIPOLYGON
"
"1","dimension:      XY
"
"1","bbox:           "
"1","xmin: 741810 ymin: 4290898 xmax: 770952.9 ymax: 4357303"
"1","
"
"1","epsg (SRID):    26910
"
"1","proj4string:    +proj=utm +zone=10 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
"
"0","pas_special <- st_read(""H:/land_use/permissible_use/zoning.gdb"",""special_area_pas"")"
"1","Reading layer `"
"1","special_area_pas"
"1","' from data source `"
"1","H:\land_use\permissible_use\zoning.gdb"
"1","' using driver `"
"1","OpenFileGDB"
"1","'"
"1","
"
"1","Simple feature collection with 36 features and 23 fields"
"1","
"
"1","geometry type:  MULTIPOLYGON
"
"1","dimension:      XY
"
"1","bbox:           "
"1","xmin: 753520.3 ymin: 4309811 xmax: 768359.4 ymax: 4350593"
"1","
"
"1","epsg (SRID):    26910
"
"1","proj4string:    +proj=utm +zone=10 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
"
"0","pas_gis<-st_difference(pas_gis, st_union(st_combine(pas_special)))"
"2","attribute variables are assumed to be spatially constant throughout all geometries"
"0","pas_special<-pas_special %>% select(PLAN_ID, SPECIAL_AREA_NAME, PLAN_NAME,SPECIAL_AREA) %>%"
"0","  rename(plan_id=PLAN_ID, local_plan=PLAN_NAME, special_area_name=SPECIAL_AREA_NAME, special_area_id=SPECIAL_AREA)"
"0","pas_gis<-pas_gis %>% select(Local_Plan_ID, Local_Plan_Name) %>%"
"0","  mutate(special_area_name=NA,special_area_id=NA) %>%"
"0","  rename(plan_id=Local_Plan_ID, local_plan=Local_Plan_Name)"
"0","gis_pas<- rbind(pas_special, pas_gis) %>%"
"0","  mutate(special_area_id=case_when(is.na(special_area_id) ~ ""0"", TRUE ~ as.character(special_area_id)),"
"0","         special_area_id=sub(""01"",""1"",special_area_id),"
"0","         id=paste(plan_id, special_area_id, sep=""-""),"
"0","         area_plan_name=NA_character_,"
"0","         local_plan=as.character(local_plan),"
"0","         plan_id=as.character(plan_id),"
"0","         special_area_name=as.character(special_area_name)) %>%"
"0","  select(id, plan_id, local_plan, special_area_name, special_area_id, area_plan_name) %>%"
"0","  rename(plan_name=local_plan)"
"0",""
